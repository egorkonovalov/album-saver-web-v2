var Ze=Object.defineProperty;var ye=a=>{throw TypeError(a)};var Xe=(a,e,t)=>e in a?Ze(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var be=(a,e,t)=>Xe(a,typeof e!="symbol"?e+"":e,t),ne=(a,e,t)=>e.has(a)||ye("Cannot "+t);var F=(a,e,t)=>(ne(a,e,"read from private field"),t?t.call(a):e.get(a)),V=(a,e,t)=>e.has(a)?ye("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),ie=(a,e,t,r)=>(ne(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t),we=(a,e,t)=>(ne(a,e,"access private method"),t);import{a as y,t as A,c as M}from"../chunks/disclose-version.CwmAI5Sj.js";import{au as Me,aJ as Ye,s as $e,z as ea,C as $,K as aa,_ as ta,A as ra,D as sa,V as la,E as na,aK as ia,aL as oa,e as Ie,u as Le,H as pe,aM as ca,q as ve,n as j,aN as ua,ak as ke,a6 as Te,al as fa,r as Fe,am as va,p as N,b as ee,l as z,g as s,y as g,x as I,m as E,o as T,v as O,k as C,t as Q,aO as Re,aP as da,aQ as G,aR as qe,h as Ce}from"../chunks/runtime.BcVk7UNP.js";import{c as _a,i as S,b as B,d as ha,o as he,a as Pe,p as x}from"../chunks/index-client.B0zAmEIW.js";import{r as Ne,s as P,e as Z,f as ze,i as X,g as De,m as ma,b as He,P as re,n as ga,t as Ae,T as Ee}from"../chunks/Placeholder.DA5kaB8F.js";import{f as ya,l as Ue,d as Oe,g as oe,a as We}from"../chunks/store.Dlcqcj33.js";import{b as Be}from"../chunks/this.Q-mQjf83.js";import{b as se}from"../chunks/paths.XWCyYyRa.js";import{b as q,R as me,a as ba}from"../chunks/artists.controller.Bg8LgLle.js";import"../chunks/legacy.75qm9smu.js";import{i as Ke}from"../chunks/lifecycle.BIetebKu.js";import{a as wa}from"../chunks/albums.controller.Bjd7kaC9.js";import{d as pa}from"../chunks/downloader.controller.tAUYAqJl.js";import{p as ka}from"../chunks/platformenvironment.service.xGjJADBI.js";function Ta(a,e,t){$&&aa();var r=a,l=la,u,n=Me()?Ye:$e;ea(()=>{n(l,l=e())&&(u&&ta(u),u=ra(()=>t(r)))}),$&&(r=sa)}const Ra=()=>performance.now(),U={tick:a=>requestAnimationFrame(a),now:()=>Ra(),tasks:new Set};function Qe(a){U.tasks.forEach(e=>{e.c(a)||(U.tasks.delete(e),e.f())}),U.tasks.size!==0&&U.tick(Qe)}function qa(a){let e;return U.tasks.size===0&&U.tick(Qe),{promise:new Promise(t=>{U.tasks.add(e={c:a,f:t})}),abort(){U.tasks.delete(e)}}}function Y(a,e){a.dispatchEvent(new CustomEvent(e))}function Ca(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const e=a.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function xe(a){const e={},t=a.split(";");for(const r of t){const[l,u]=r.split(":");if(!l||u===void 0)break;const n=Ca(l.trim());e[n]=u.trim()}return e}const Aa=a=>a;function Ea(a,e,t,r){var l=(a&ua)!==0,u="both",n,f=e.inert,c,i;function o(){var v=fa,k=pe;ke(null),Te(null);try{return n??(n=t()(e,(r==null?void 0:r())??{},{direction:u}))}finally{ke(v),Te(k)}}var d={is_global:l,in(){e.inert=f,Y(e,"introstart"),c=de(e,o(),i,1,()=>{Y(e,"introend"),c==null||c.abort(),c=n=void 0})},out(v){e.inert=!0,Y(e,"outrostart"),i=de(e,o(),c,0,()=>{Y(e,"outroend"),v==null||v()})},stop:()=>{c==null||c.abort(),i==null||i.abort()}},m=pe;if((m.transitions??(m.transitions=[])).push(d),ya){var _=l;if(!_){for(var h=m.parent;h&&h.f&na;)for(;(h=h.parent)&&!(h.f&ia););_=!h||(h.f&oa)!==0}_&&Ie(()=>{Le(()=>d.in())})}}function de(a,e,t,r,l){var u=r===1;if(ca(e)){var n,f=!1;return ve(()=>{if(!f){var k=e({direction:u?"in":"out"});n=de(a,k,t,r,l)}}),{abort:()=>{f=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return l(),{abort:j,deactivate:j,reset:j,t:()=>r};const{delay:c=0,css:i,tick:o,easing:d=Aa}=e;var m=[];if(u&&t===void 0&&(o&&o(0,1),i)){var _=xe(i(0,1));m.push(_,_)}var h=()=>1-r,v=a.animate(m,{duration:c});return v.onfinish=()=>{var k=(t==null?void 0:t.t())??1-r;t==null||t.abort();var L=r-k,p=e.duration*Math.abs(L),b=[];if(p>0){if(i)for(var R=Math.ceil(p/16.666666666666668),w=0;w<=R;w+=1){var W=k+L*d(w/R),le=i(W,1-W);b.push(xe(le))}h=()=>{var D=v.currentTime;return k+L*d(D/p)},o&&qa(()=>{if(v.playState!=="running")return!1;var D=h();return o(D,1-D),!0})}v=a.animate(b,{duration:p,fill:"forwards"}),v.onfinish=()=>{h=()=>r,o==null||o(r,1-r),l()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=j)},deactivate:()=>{l=j},reset:()=>{r===0&&(o==null||o(1,0))},t:()=>h()}}function xa(a,e,t=e){var r=Me();Ue(a,"input",()=>{var l=ue(a)?fe(a.value):a.value;t(l),r&&l!==(l=e())&&(a.value=l??"")}),Fe(()=>{var l=e();if($&&a.defaultValue!==a.value){t(ue(a)?fe(a.value):a.value);return}ue(a)&&l===fe(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const ce=new Set;function Sa(a,e,t,r,l=r){var u=t.getAttribute("type")==="checkbox",n=a;let f=!1;if(e!==null)for(var c of e)n=n[c]??(n[c]=[]);n.push(t),Ue(t,"change",()=>{var i=t.__value;u&&(i=Se(n,i,t.checked)),l(i)},()=>l(u?[]:null)),Fe(()=>{var i=r();if($&&t.defaultChecked!==t.checked){f=!0;return}u?(i=i||[],t.checked=i.includes(t.__value)):t.checked=_a(t.__value,i)}),va(()=>{var i=n.indexOf(t);i!==-1&&n.splice(i,1)}),ce.has(n)||(ce.add(n),ve(()=>{n.sort((i,o)=>i.compareDocumentPosition(o)===4?-1:1),ce.delete(n)})),ve(()=>{if(f){var i;if(u)i=Se(n,i,t.checked);else{var o=n.find(d=>d.checked);i=o==null?void 0:o.__value}l(i)}})}function Se(a,e,t){for(var r=new Set,l=0;l<a.length;l+=1)a[l].checked&&r.add(a[l].__value);return t||r.delete(e),Array.from(r)}function ue(a){var e=a.type;return e==="number"||e==="range"}function fe(a){return a===""?null:+a}var H,K,J,ae,Ve;const te=class te{constructor(e){V(this,ae);V(this,H,new WeakMap);V(this,K);V(this,J);ie(this,J,e)}observe(e,t){var r=F(this,H).get(e)||new Set;return r.add(t),F(this,H).set(e,r),we(this,ae,Ve).call(this).observe(e,F(this,J)),()=>{var l=F(this,H).get(e);l.delete(t),l.size===0&&(F(this,H).delete(e),F(this,K).unobserve(e))}}};H=new WeakMap,K=new WeakMap,J=new WeakMap,ae=new WeakSet,Ve=function(){return F(this,K)??ie(this,K,new ResizeObserver(e=>{for(var t of e){te.entries.set(t.target,t);for(var r of F(this,H).get(t.target)||[])r(t)}}))},be(te,"entries",new WeakMap);let _e=te;var Ma=new _e({box:"border-box"});function Ia(a,e,t){var r=Ma.observe(a,()=>t(a[e]));Ie(()=>(Le(()=>t(a[e])),r))}var La=(a,e)=>g(e,""),Fa=A('<input type="reset" value="" class="w-4 h-4">'),Pa=A('<form class="form"><div class="w-full searchbar flex items-center"><label class="w-full"><input type="search" id="search_record" class="bg-transparent w-full border-none outline-0" placeholder="What do you want to listen to?" required></label> <!></div></form>');function Na(a,e){N(e,!0);const t=()=>{var d;(d=s(l))==null||d.blur(),e.search(s(r))};let r=I(""),l=I(void 0),u=I(!1);ee(()=>e.changeInputQuery(s(r))),ee(()=>e.changeInputFocuse(s(u)));var n=Pa(),f=E(n),c=E(f),i=E(c);Ne(i),Be(i,d=>g(l,d),()=>s(l)),T(c);var o=O(c,2);S(o,()=>s(r),d=>{var m=Fa();m.__click=[La,r],P(m,"style",`background: url(${se??""}/close.svg)`),y(d,m)}),T(f),T(n),oe("submit",n,t),oe("focus",i,()=>g(u,!0)),oe("blur",i,()=>g(u,!1)),xa(i,()=>s(r),d=>g(r,d)),y(a,n),z()}Oe(["click"]);function za(a){return a<.5?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function Da(a){const e=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[a,"px"]}function Ha(a,{delay:e=0,duration:t=400,easing:r=za,amount:l=5,opacity:u=0}={}){const n=getComputedStyle(a),f=+n.opacity,c=n.filter==="none"?"":n.filter,i=f*(1-u),[o,d]=Da(l);return{delay:e,duration:t,easing:r,css:(m,_)=>`opacity: ${f-i*_}; filter: ${c} blur(${_*o}${d});`}}var Ua=A('<input type="radio" name="record-type" class="hidden"> <label> </label>',1),Oa=A('<div class="filter"></div>');function Wa(a,e){N(e,!0);const t=[];let r=B(e,"requestType",15),l=[{type:q.Album},{type:q.Track}];ee(()=>e.changeRequestType(r()));var u=M(),n=C(u);S(n,()=>r()!==q.Release,f=>{var c=Oa();Z(c,21,()=>l,X,(i,o)=>{var d=Ua(),m=C(d);Ne(m);var _,h=O(m,2),v=E(h,!0);T(h),Q(()=>{_!==(_=s(o).type)&&(m.value=(m.__value=s(o).type)==null?"":s(o).type),P(m,"id",`request_${s(o).type}`),P(h,"for",`request_${s(o).type}`),ze(h,`filter-button
      ${(s(o).type===r()?"active":"")??""}`),We(v,s(o).type)}),Sa(t,[],m,()=>(s(o).type,r()),r),y(i,d)}),T(c),Ea(3,c,()=>Ha),y(f,c)}),y(a,u),z()}class Ba{async getReleases(){return(await De(ma)).result}}const Ka=new Ba;class Qa{async getReleases(){return await Ka.getReleases()}}const Va=new Qa;var ja=A('<a class="record"><!></a>'),Ga=A('<div class="album-grid"></div>');function Ja(a,e){N(e,!1);async function t(){return await Va.getReleases()}Ke();var r=M(),l=C(r);He(l,t,u=>{re(u,{count:4,_class:"album-grid"})},(u,n)=>{var f=Ga();Z(f,5,()=>s(n),X,(c,i)=>{var o=ja(),d=E(o);me(d,{get record(){return s(i)},get requestType(){return q.Release}}),T(o),Q(()=>P(o,"href",`${se??""}/album?albumUrl=$${s(i).youTubeMusicPlaylistUrl??""}`)),y(c,o)}),T(f),y(u,f)}),y(a,r),z()}var Za=A('<div id="svelte-infinite-scroll" style="width: 0;"></div>');function je(a,e){N(e,!1);let t=B(e,"threshold",8,0),r=B(e,"horizontal",8,!1),l=B(e,"elementScroll",8,null),u=B(e,"hasMore",8,!0),n=B(e,"reverse",8,!1),f=B(e,"window",8,!1);const c=ha();let i=G(!1),o=G(),d=G(),m=G(),_=G();const h=p=>{if(!u())return;const b=p.target;v(b,n(),r())<=t()?(!s(i)&&u()&&(c("loadMore"),g(d,b.scrollHeight),g(m,b.scrollTop)),g(i,!0)):g(i,!1)},v=(p,b,R)=>{const w=p.documentElement?p.documentElement:p;return b?R?w.scrollLeft:w.scrollTop:R?w.scrollWidth-w.clientWidth-w.scrollLeft:w.scrollHeight-w.clientHeight-w.scrollTop};he(()=>{f()?g(_,document):l()?g(_,l()):g(_,s(o).parentNode)}),Pe(()=>{s(_)&&(s(_).removeEventListener("scroll",h),s(_).removeEventListener("resize",h))}),Re(()=>(s(_),Ce(n())),()=>{s(_)&&(n()&&qe(_,s(_).scrollTop=s(_).scrollHeight),s(_).addEventListener("scroll",h),s(_).addEventListener("resize",h))}),Re(()=>(s(i),Ce(n()),s(_),s(d),s(m)),()=>{s(i)&&n()&&qe(_,s(_).scrollTop=s(_).scrollHeight-s(d)+s(m))}),da(),Ke();var k=M(),L=C(k);S(L,()=>!f()&&!l(),p=>{var b=Za();Be(b,R=>g(o,R),()=>s(o)),y(p,b)}),y(a,k),z()}var Xa=A('<div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-5 w-5 animate-spin text-black dark:text-white"><circle style="opacity: 0.05" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path style="opacity: 1" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>');function Ya(a,e){var t=Xa();Q(()=>ze(t,`${e.stylingClass} flex justify-center`)),y(a,t)}var $a=A('<a class="record"><!></a>'),et=A('<div class="album-grid"><!> <!></div> <!>',1);function at(a,e){N(e,!0);const t=async()=>await wa.getAlbums(e.query);async function r(){g(n,!0),g(l,x(await t())),u.push(...s(l)),g(n,!1)}let l=I(x([])),u=x([]),n=I(!1),f=I(!1);he(async()=>{g(f,!0),await r(),g(f,!1)});var c=M(),i=C(c);S(i,()=>s(f),o=>{re(o,{count:4,_class:"album-grid"})},o=>{var d=M(),m=C(d);S(m,()=>u.length,_=>{var h=et(),v=C(h),k=E(v);Z(k,17,()=>u,X,(b,R)=>{var w=$a(),W=E(w);me(W,{get record(){return s(R)},get requestType(){return q.Release}}),T(w),Q(()=>P(w,"href",`${se??""}/album?albumUrl=$${s(R).youTubeMusicPlaylistUrl??""}`)),y(b,w)});var L=O(k,2);S(L,()=>s(n),b=>{Ya(b,{stylingClass:"col-span-2 h-4"})}),T(v);var p=O(v,2);je(p,{threshold:100,window:!0,$$events:{loadMore:r}}),y(_,h)},null,!0),y(o,d)}),y(a,c),z()}class tt{async getTracks(e){return(await De(ga,{params:{query:e}})).result}}const rt=new tt;class st{async getTracks(e){return await rt.getTracks(e)}}const lt=new st;var nt=(a,e,t)=>{a.preventDefault(),e(s(t).youTubeMusicPlaylistUrl)},it=A('<a href="/" class="record"><!></a>'),ot=A('<div class="track-list"></div> <!>',1);function ct(a,e){N(e,!0);let t=I(x([])),r=I(x([])),l=I(!1);async function u(o){await pa.download(o,2),ka.closeWith("success")}const n=async()=>await lt.getTracks(e.query);async function f(){g(t,x(await n())),g(r,x(s(r).concat(s(t))))}he(async()=>{g(l,!0),await f(),g(l,!1)});var c=M(),i=C(c);S(i,()=>s(l),o=>{re(o,{count:4,_class:"track-list"})},o=>{var d=M(),m=C(d);S(m,()=>s(r).length,_=>{var h=ot(),v=C(h);Z(v,21,()=>s(r),X,(L,p)=>{var b=it();b.__click=[nt,u,p];var R=E(b);me(R,{get record(){return s(p)},get requestType(){return q.Track}}),T(b),y(L,b)}),T(v);var k=O(v,2);je(k,{threshold:100,window:!0,$$events:{loadMore:f}}),y(_,h)},null,!0),y(o,d)}),y(a,c),z()}Oe(["click"]);var ut=A('<a><img class="cover"> <div class="text-[12px]"><p class="font-semibold leading-tight"> </p></div></a>');function ft(a,e){N(e,!0);var t=ut(),r=E(t),l=O(r,2),u=E(l),n=E(u,!0);T(u),T(l),T(t),Q(()=>{P(t,"href",`${se??""}/artist?artistId=${e.artist.youTubeMusicUrl??""}&artistName=${e.artist.title??""}`),P(r,"src",e.artist.imageUrl),P(r,"alt",e.artist.title),We(n,e.artist.title)}),y(a,t),z()}var vt=A('<div class="artist-list"></div>');function dt(a,e){N(e,!0);const t=async()=>await ba.getArtists(e.query);var r=M(),l=C(r);He(l,t,u=>{re(u,{count:4,_class:"artist-list"})},(u,n)=>{var f=vt();Z(f,21,()=>s(n),X,(c,i)=>{ft(c,{get artist(){return s(i)}})}),T(f),y(u,f)}),y(a,r),z()}var _t=A('<div class="content"><!></div>'),ht=A('<div class="top-bar"><div class="flex"><!></div> <!></div> <!>',1);function St(a,e){N(e,!0);const t=v=>g(c,x(v));function r(v){v?s(c)===q.Release&&t(q.Album):s(f)===void 0&&(s(c),q.Release)}function l(v){n=v,n?s(c)===q.Release&&g(c,x(q.Album)):(g(f,""),g(c,x(q.Release)))}let u=I(void 0),n="",f=I(""),c=I(x(q.Release));ee(()=>{n=n,g(c,x(s(c))),Ae.clearTokens(Ee)}),Pe(()=>Ae.clearTokens(Ee));var i=ht(),o=C(i),d=E(o),m=E(d);Na(m,{search:v=>g(f,x(v)),changeInputQuery:l,changeInputFocuse:r}),T(d);var _=O(d,2);Wa(_,{changeRequestType:t,get requestType(){return s(c)}}),T(o);var h=O(o,2);Ta(h,()=>()=>({query:s(f),requestType:s(c)}),v=>{var k=_t(),L=E(k);S(L,()=>s(f)!=="",p=>{var b=M(),R=C(b);S(R,()=>s(c)===q.Album,w=>{at(w,{get query(){return s(f)}})},w=>{var W=M(),le=C(W);S(le,()=>s(c)===q.Track,D=>{ct(D,{get query(){return s(f)}})},D=>{var ge=M(),Ge=C(ge);S(Ge,()=>s(c)===q.Artist,Je=>{dt(Je,{get query(){return s(f)}})},null,!0),y(D,ge)},!0),y(w,W)}),y(p,b)},p=>{var b=M(),R=C(b);S(R,()=>s(c)===q.Release,w=>{Ja(w,{})},null,!0),y(p,b)}),T(k),Q(()=>P(k,"style",`margin-top: ${s(u)??""}px`)),y(v,k)}),Ia(o,"clientHeight",v=>g(u,v)),y(a,i),z()}export{St as component};
