import{e as ke}from"../chunks/index.93323930.js";import{b as Y,a as ve,R as $e}from"../chunks/artists.controller.893bd881.js";import{t as Z,T as x,h as j,u as X,e as z,P as he}from"../chunks/Placeholder.394be9ac.js";import{s as me,f as g,a as V,l as O,g as k,h as I,d as u,c as D,m as R,j as b,k as J,i as N,A as h,D as de,E as _e,n as H,v as _,u as Ee,Q as le,R as ae,J as pe,e as re}from"../chunks/scheduler.fb79c3ec.js";import{S as be,i as ge,a as P,t as S,g as ee,c as te,b as K,d as Q,m as F,e as G}from"../chunks/index.bb4217d0.js";import{h as Te}from"../chunks/singletons.ceb4f553.js";import{a as Ie}from"../chunks/stores.4682d7de.js";import{b as q}from"../chunks/paths.492c3b06.js";import{d as we}from"../chunks/downloader.controller.79764b00.js";async function ye(n){let e=await Y.getTracks(n,9);return Z.clearTokens(x),e}async function Ce(n){let e=await Y.getAlbums(n,6);return Z.clearTokens(x),e}const Ae=async({url:n})=>{Z.clearTokens(x);const e=n.searchParams.get("artistId"),r=n.searchParams.get("artistName");if(e&&r)return{artistId:e,artistName:r,streamed:{tracks:ye(e),albums:Ce(e),artistImage:Y.getImage(e)}};throw ke(404,"Not found")},xe=Object.freeze(Object.defineProperty({__proto__:null,load:Ae},Symbol.toStringTag,{value:"Module"})),ne='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>',Pe=Te("goto");function se(n){let e,r,l=n[0].recordType+"",t,c,a,o="â€¢",s,i,d=n[0].year+"",m;return{c(){e=g("div"),r=g("p"),t=O(l),c=V(),a=g("p"),a.textContent=o,s=V(),i=g("p"),m=O(d),this.h()},l(p){e=k(p,"DIV",{class:!0});var v=I(e);r=k(v,"P",{});var U=I(r);t=R(U,l),U.forEach(u),c=D(v),a=k(v,"P",{["data-svelte-h"]:!0}),Ee(a)!=="svelte-1ggzppq"&&(a.textContent=o),s=D(v),i=k(v,"P",{});var L=I(i);m=R(L,d),L.forEach(u),v.forEach(u),this.h()},h(){b(e,"class","flex gap-1 text-[11px] font-medium")},m(p,v){N(p,e,v),h(e,r),h(r,t),h(e,c),h(e,a),h(e,s),h(e,i),h(i,m)},p(p,v){v&1&&l!==(l=p[0].recordType+"")&&H(t,l),v&1&&d!==(d=p[0].year+"")&&H(m,d)},d(p){p&&u(e)}}}function Ne(n){let e,r,l,t,c,a=n[0].title+"",o,s,i,d=(n[0].author===void 0?"Various Artists":n[0].author)+"",m,p,v,U,L,$=n[0].recordType&&n[0].year&&se(n);return{c(){e=g("a"),r=g("div"),l=V(),t=g("div"),c=g("p"),o=O(a),s=V(),i=g("p"),m=O(d),p=V(),$&&$.c(),this.h()},l(E){e=k(E,"A",{href:!0,class:!0});var w=I(e);r=k(w,"DIV",{class:!0,style:!0}),I(r).forEach(u),l=D(w),t=k(w,"DIV",{class:!0});var T=I(t);c=k(T,"P",{class:!0});var y=I(c);o=R(y,a),y.forEach(u),s=D(T),i=k(T,"P",{class:!0});var C=I(i);m=R(C,d),C.forEach(u),p=D(T),$&&$.l(T),T.forEach(u),w.forEach(u),this.h()},h(){b(r,"class","cover"),J(r,"background-image","url("+n[0].imageUrl+")"),b(c,"class","record__name"),b(i,"class","record__artist"),b(t,"class","record__title-container"),b(e,"href",n[2]),b(e,"class",v=n[1]+" record")},m(E,w){N(E,e,w),h(e,r),h(e,l),h(e,t),h(t,c),h(c,o),h(t,s),h(t,i),h(i,m),h(t,p),$&&$.m(t,null),U||(L=de(e,"click",_e(n[3])),U=!0)},p(E,[w]){w&1&&J(r,"background-image","url("+E[0].imageUrl+")"),w&1&&a!==(a=E[0].title+"")&&H(o,a),w&1&&d!==(d=(E[0].author===void 0?"Various Artists":E[0].author)+"")&&H(m,d),E[0].recordType&&E[0].year?$?$.p(E,w):($=se(E),$.c(),$.m(t,null)):$&&($.d(1),$=null),w&2&&v!==(v=E[1]+" record")&&b(e,"class",v)},i:_,o:_,d(E){E&&u(e),$&&$.d(),U=!1,L()}}}function Se(n,e,r){let{album:l}=e,{_class:t=""}=e;const c=`${q}/album?albumUrl=${l.youTubeMusicPlaylistUrl}`;function a(){Ie.set(l),Pe(c)}return n.$$set=o=>{"album"in o&&r(0,l=o.album),"_class"in o&&r(1,t=o._class)},[l,t,c,a]}class Ue extends be{constructor(e){super(),ge(this,e,Se,Ne,me,{album:0,_class:1})}}function oe(n,e,r){const l=n.slice();return l[4]=e[r],l}function ce(n,e,r){const l=n.slice();return l[7]=e[r],l}function Ve(n){return{c:_,l:_,m:_,p:_,d:_}}function De(n){let e,r,l=n[0].artistName+"",t;return{c(){e=g("div"),r=g("h1"),t=O(l),this.h()},l(c){e=k(c,"DIV",{class:!0,style:!0});var a=I(e);r=k(a,"H1",{class:!0});var o=I(r);t=R(o,l),o.forEach(u),a.forEach(u),this.h()},h(){b(r,"class","name"),b(e,"class","artist-header"),J(e,"background-image","url("+n[3]+")")},m(c,a){N(c,e,a),h(e,r),h(r,t)},p(c,a){a&1&&l!==(l=c[0].artistName+"")&&H(t,l),a&1&&J(e,"background-image","url("+c[3]+")")},d(c){c&&u(e)}}}function Le(n){let e;return{c(){e=g("div"),this.h()},l(r){e=k(r,"DIV",{class:!0}),I(e).forEach(u),this.h()},h(){b(e,"class","h-[10rem] animate-pulse bg-stone-200 w-full mb-4")},m(r,l){N(r,e,l)},p:_,d(r){r&&u(e)}}}function Me(n){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Oe(n){let e,r,l=z(n[3]),t=[];for(let a=0;a<l.length;a+=1)t[a]=ie(ce(n,l,a));const c=a=>S(t[a],1,1,()=>{t[a]=null});return{c(){e=g("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"UL",{class:!0});var o=I(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(u),this.h()},h(){b(e,"class","artist track-list conveyer")},m(a,o){N(a,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);r=!0},p(a,o){if(o&3){l=z(a[3]);let s;for(s=0;s<l.length;s+=1){const i=ce(a,l,s);t[s]?(t[s].p(i,o),P(t[s],1)):(t[s]=ie(i),t[s].c(),P(t[s],1),t[s].m(e,null))}for(ee(),s=l.length;s<t.length;s+=1)c(s);te()}},i(a){if(!r){for(let o=0;o<l.length;o+=1)P(t[o]);r=!0}},o(a){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)S(t[o]);r=!1},d(a){a&&u(e),pe(t,a)}}}function ie(n){let e,r,l,t,c,a,o;l=new ve({props:{requestType:$e.ArtistTracks,record:n[7]}});function s(){return n[2](n[7])}return{c(){e=g("li"),r=g("a"),K(l.$$.fragment),t=V(),this.h()},l(i){e=k(i,"LI",{class:!0});var d=I(e);r=k(d,"A",{href:!0});var m=I(r);Q(l.$$.fragment,m),m.forEach(u),t=D(d),d.forEach(u),this.h()},h(){b(r,"href","/"),b(e,"class","record")},m(i,d){N(i,e,d),h(e,r),F(l,r,null),h(e,t),c=!0,a||(o=de(r,"click",_e(s)),a=!0)},p(i,d){n=i;const m={};d&1&&(m.record=n[7]),l.$set(m)},i(i){c||(P(l.$$.fragment,i),c=!0)},o(i){S(l.$$.fragment,i),c=!1},d(i){i&&u(e),G(l),a=!1,o()}}}function Re(n){let e,r;return e=new he({props:{count:3,_class:"mt-0 track-list artist"}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,t){F(e,l,t),r=!0},p:_,i(l){r||(P(e.$$.fragment,l),r=!0)},o(l){S(e.$$.fragment,l),r=!1},d(l){G(e,l)}}}function je(n){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function qe(n){let e,r,l=n[3].length&&ue(n);return{c(){l&&l.c(),e=re()},l(t){l&&l.l(t),e=re()},m(t,c){l&&l.m(t,c),N(t,e,c),r=!0},p(t,c){t[3].length?l?(l.p(t,c),c&1&&P(l,1)):(l=ue(t),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(ee(),S(l,1,1,()=>{l=null}),te())},i(t){r||(P(l),r=!0)},o(t){S(l),r=!1},d(t){t&&u(e),l&&l.d(t)}}}function ue(n){let e,r,l=z(n[3]),t=[];for(let a=0;a<l.length;a+=1)t[a]=fe(oe(n,l,a));const c=a=>S(t[a],1,1,()=>{t[a]=null});return{c(){e=g("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"UL",{class:!0});var o=I(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(u),this.h()},h(){b(e,"class","album-grid conveyer")},m(a,o){N(a,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);r=!0},p(a,o){if(o&1){l=z(a[3]);let s;for(s=0;s<l.length;s+=1){const i=oe(a,l,s);t[s]?(t[s].p(i,o),P(t[s],1)):(t[s]=fe(i),t[s].c(),P(t[s],1),t[s].m(e,null))}for(ee(),s=l.length;s<t.length;s+=1)c(s);te()}},i(a){if(!r){for(let o=0;o<l.length;o+=1)P(t[o]);r=!0}},o(a){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)S(t[o]);r=!1},d(a){a&&u(e),pe(t,a)}}}function fe(n){let e,r,l,t;return r=new Ue({props:{album:n[4]}}),{c(){e=g("li"),K(r.$$.fragment),l=V()},l(c){e=k(c,"LI",{});var a=I(e);Q(r.$$.fragment,a),l=D(a),a.forEach(u)},m(c,a){N(c,e,a),F(r,e,null),h(e,l),t=!0},p(c,a){const o={};a&1&&(o.album=c[4]),r.$set(o)},i(c){t||(P(r.$$.fragment,c),t=!0)},o(c){S(r.$$.fragment,c),t=!1},d(c){c&&u(e),G(r)}}}function He(n){let e,r;return e=new he({props:{count:6,_class:"album-grid conveyer"}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,t){F(e,l,t),r=!0},p:_,i(l){r||(P(e.$$.fragment,l),r=!0)},o(l){S(e.$$.fragment,l),r=!1},d(l){G(e,l)}}}function Be(n){let e,r,l,t,c,a,o,s,i,d,m,p,v,U,L,$,E,w,T={ctx:n,current:null,token:null,hasCatch:!1,pending:Le,then:De,catch:Ve,value:3};j(e=n[0].streamed.artistImage,T);let y={ctx:n,current:null,token:null,hasCatch:!1,pending:Re,then:Oe,catch:Me,value:3,blocks:[,,,]};j(i=n[0].streamed.tracks,y);let C={ctx:n,current:null,token:null,hasCatch:!1,pending:He,then:qe,catch:je,value:3,blocks:[,,,]};return j(E=n[0].streamed.albums,C),{c(){T.block.c(),r=V(),l=g("section"),t=g("a"),c=O("Top Tracks"),a=new le(!1),s=V(),y.block.c(),d=V(),m=g("section"),p=g("a"),v=O("Albums"),U=new le(!1),$=V(),C.block.c(),this.h()},l(A){T.block.l(A),r=D(A),l=k(A,"SECTION",{});var f=I(l);t=k(f,"A",{href:!0,class:!0});var M=I(t);c=R(M,"Top Tracks"),a=ae(M,!1),M.forEach(u),s=D(f),y.block.l(f),f.forEach(u),d=D(A),m=k(A,"SECTION",{});var B=I(m);p=k(B,"A",{href:!0,class:!0});var W=I(p);v=R(W,"Albums"),U=ae(W,!1),W.forEach(u),$=D(B),C.block.l(B),B.forEach(u),this.h()},h(){a.a=null,b(t,"href",o=q+"/artist/tracks?artistId=$"+n[0].artistId),b(t,"class","text-xl px-4 btn btn--icon"),U.a=null,b(p,"href",L=q+"/artist/albums?artistId=$"+n[0].artistId),b(p,"class","px-4 btn btn--icon")},m(A,f){T.block.m(A,T.anchor=f),T.mount=()=>r.parentNode,T.anchor=r,N(A,r,f),N(A,l,f),h(l,t),h(t,c),a.m(ne,t),h(l,s),y.block.m(l,y.anchor=null),y.mount=()=>l,y.anchor=null,N(A,d,f),N(A,m,f),h(m,p),h(p,v),U.m(ne,p),h(m,$),C.block.m(m,C.anchor=null),C.mount=()=>m,C.anchor=null,w=!0},p(A,[f]){n=A,T.ctx=n,f&1&&e!==(e=n[0].streamed.artistImage)&&j(e,T)||X(T,n,f),(!w||f&1&&o!==(o=q+"/artist/tracks?artistId=$"+n[0].artistId))&&b(t,"href",o),y.ctx=n,f&1&&i!==(i=n[0].streamed.tracks)&&j(i,y)||X(y,n,f),(!w||f&1&&L!==(L=q+"/artist/albums?artistId=$"+n[0].artistId))&&b(p,"href",L),C.ctx=n,f&1&&E!==(E=n[0].streamed.albums)&&j(E,C)||X(C,n,f)},i(A){w||(P(y.block),P(C.block),w=!0)},o(A){for(let f=0;f<3;f+=1){const M=y.blocks[f];S(M)}for(let f=0;f<3;f+=1){const M=C.blocks[f];S(M)}w=!1},d(A){A&&(u(r),u(l),u(d),u(m)),T.block.d(A),T.token=null,T=null,y.block.d(),y.token=null,y=null,C.block.d(),C.token=null,C=null}}}function ze(n,e,r){let{data:l}=e;async function t(a){await we.download(a,2),l.environmentStore.envokeHaptic("heavy"),l.environmentStore.close()}const c=a=>t(a.youTubeMusicPlaylistUrl);return n.$$set=a=>{"data"in a&&r(0,l=a.data)},[l,t,c]}class et extends be{constructor(e){super(),ge(this,e,ze,Be,me,{data:0})}}export{et as component,xe as universal};
