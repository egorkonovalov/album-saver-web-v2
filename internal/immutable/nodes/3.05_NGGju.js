import{e as F}from"../chunks/DNSHY1Ls.js";import{a as J}from"../chunks/Bjqgey6V.js";import{s as q,n as i,d as u,i as v,o as _,c as p,e as g,g as $,h as b,j as w,b as k,u as K,A as Q,B as D,a as A,f as C,t as I,m as R}from"../chunks/DacqP540.js";import{h as P,u as N,e as U,P as W}from"../chunks/CZiYa9kd.js";import{S as V,i as H,t as y,a as E,d as L,m as O,b as z,e as G}from"../chunks/ZqVSTlDQ.js";import{d as X}from"../chunks/BRxswFr9.js";function Y(s,t){let n=s.searchParams.get(t);if(n)return n;F(500,`The value for the parameter "${t}" was not provided.`)}const Z=async({url:s,parent:t})=>{const n=Y(s,"albumUrl"),{environmentStore:e}=await t();return{environmentStore:e,albumUrl:n,streamed:{album:J.getAlbum(n)}}},_e=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));function x(s){let t,n,e,a,o;return{c(){t=b("span"),n=w(),e=b("span"),a=w(),o=b("span"),this.h()},l(l){t=p(l,"SPAN",{class:!0}),g(t).forEach(u),n=$(l),e=p(l,"SPAN",{class:!0}),g(e).forEach(u),a=$(l),o=p(l,"SPAN",{class:!0}),g(o).forEach(u),this.h()},h(){_(t,"class","artwork bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse aspect-square"),_(e,"class","h-5 w-20 rounded-md self-center bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse my-3"),_(o,"class","h-3 w-32 rounded-md self-center bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse")},m(l,r){v(l,t,r),v(l,n,r),v(l,e,r),v(l,a,r),v(l,o,r)},p:i,i,o:i,d(l){l&&(u(t),u(n),u(e),u(a),u(o))}}}class ee extends V{constructor(t){super(),H(this,t,null,x,q,{})}}function T(s,t,n){const e=s.slice();return e[3]=t[n],e}function te(s){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function le(s){let t,n,e,a,o,l=s[2].albumTitle+"",r,m,c,f=s[2].artistName+"",S;return{c(){t=b("img"),e=w(),a=b("div"),o=b("h3"),r=I(l),m=w(),c=b("p"),S=I(f),this.h()},l(h){t=p(h,"IMG",{class:!0,src:!0,alt:!0}),e=$(h),a=p(h,"DIV",{class:!0});var d=g(a);o=p(d,"H3",{class:!0});var M=g(o);r=C(M,l),M.forEach(u),m=$(d),c=p(d,"P",{});var B=g(c);S=C(B,f),B.forEach(u),d.forEach(u),this.h()},h(){_(t,"class","artwork"),D(t.src,n=s[2].albumImage)||_(t,"src",n),_(t,"alt","cover"),_(o,"class","title"),_(a,"class","headings")},m(h,d){v(h,t,d),v(h,e,d),v(h,a,d),k(a,o),k(o,r),k(a,m),k(a,c),k(c,S)},p(h,d){d&1&&!D(t.src,n=h[2].albumImage)&&_(t,"src",n),d&1&&l!==(l=h[2].albumTitle+"")&&A(r,l),d&1&&f!==(f=h[2].artistName+"")&&A(S,f)},i,o:i,d(h){h&&(u(t),u(e),u(a))}}}function ae(s){let t,n;return t=new ee({}),{c(){G(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,a){O(t,e,a),n=!0},p:i,i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function ne(s){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function re(s){let t,n=U(s[2].result),e=[];for(let a=0;a<n.length;a+=1)e[a]=j(T(s,n,a));return{c(){t=b("ul");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=p(a,"UL",{class:!0});var o=g(t);for(let l=0;l<e.length;l+=1)e[l].l(o);o.forEach(u),this.h()},h(){_(t,"class","track-list")},m(a,o){v(a,t,o);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null)},p(a,o){if(o&1){n=U(a[2].result);let l;for(l=0;l<n.length;l+=1){const r=T(a,n,l);e[l]?e[l].p(r,o):(e[l]=j(r),e[l].c(),e[l].m(t,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=n.length}},i,o:i,d(a){a&&u(t),R(e,a)}}}function j(s){let t,n,e,a=s[3].title+"",o,l;return{c(){t=b("li"),n=b("div"),e=b("p"),o=I(a),l=w(),this.h()},l(r){t=p(r,"LI",{});var m=g(t);n=p(m,"DIV",{class:!0});var c=g(n);e=p(c,"P",{});var f=g(e);o=C(f,a),f.forEach(u),c.forEach(u),l=$(m),m.forEach(u),this.h()},h(){_(n,"class","track")},m(r,m){v(r,t,m),k(t,n),k(n,e),k(e,o),k(t,l)},p(r,m){m&1&&a!==(a=r[3].title+"")&&A(o,a)},d(r){r&&u(t)}}}function oe(s){let t,n;return t=new W({props:{count:8,_class:"album-entry track-list mt-0"}}),{c(){G(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,a){O(t,e,a),n=!0},p:i,i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function se(s){let t,n,e,a,o,l={ctx:s,current:null,token:null,hasCatch:!1,pending:ae,then:le,catch:te,value:2,blocks:[,,,]};P(n=s[0].streamed.album,l);let r={ctx:s,current:null,token:null,hasCatch:!1,pending:oe,then:re,catch:ne,value:2,blocks:[,,,]};return P(a=s[0].streamed.album,r),{c(){t=b("div"),l.block.c(),e=w(),r.block.c(),this.h()},l(m){t=p(m,"DIV",{class:!0});var c=g(t);l.block.l(c),e=$(c),r.block.l(c),c.forEach(u),this.h()},h(){_(t,"class","album-entry")},m(m,c){v(m,t,c),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=e,k(t,e),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null,o=!0},p(m,[c]){s=m,l.ctx=s,c&1&&n!==(n=s[0].streamed.album)&&P(n,l)||N(l,s,c),r.ctx=s,c&1&&a!==(a=s[0].streamed.album)&&P(a,r)||N(r,s,c)},i(m){o||(E(l.block),E(r.block),o=!0)},o(m){for(let c=0;c<3;c+=1){const f=l.blocks[c];y(f)}for(let c=0;c<3;c+=1){const f=r.blocks[c];y(f)}o=!1},d(m){m&&u(t),l.block.d(),l.token=null,l=null,r.block.d(),r.token=null,r=null}}}function ce(s,t,n){let{data:e}=t;async function a(o){await X.download(o,1),e.environmentStore.envokeHaptic("heavy"),e.environmentStore.close()}return K(async()=>{e.environmentStore.showMainButton("Download Album"),e.environmentStore.onMainButtonClick(()=>a(e.albumUrl))}),Q(()=>{e.environmentStore.offMainButtonClick(()=>a(e.albumUrl)),e.environmentStore.hideMainButton()}),s.$$set=o=>{"data"in o&&n(0,e=o.data)},[e]}class pe extends V{constructor(t){super(),H(this,t,ce,se,q,{data:0})}}export{pe as component,_e as universal};
