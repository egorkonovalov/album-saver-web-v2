var Ze=Object.defineProperty;var ge=t=>{throw TypeError(t)};var Xe=(t,e,a)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var ye=(t,e,a)=>Xe(t,typeof e!="symbol"?e+"":e,a),le=(t,e,a)=>e.has(t)||ge("Cannot "+a);var F=(t,e,a)=>(le(t,e,"read from private field"),a?a.call(t):e.get(t)),Q=(t,e,a)=>e.has(t)?ge("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ne=(t,e,a,r)=>(le(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),be=(t,e,a)=>(le(t,e,"access private method"),a);import{a as y,t as C,c as x}from"../chunks/disclose-version.CxhRANXo.js";import{a4 as xe,aJ as Ye,A as $e,v as et,y as X,a5 as tt,ab as at,w as rt,z as st,U as lt,E as nt,aK as ot,aL as it,e as Me,u as Ie,I as we,aM as ct,q as ue,o as j,aN as ft,a8 as pe,P as ke,as as ut,b as Le,a1 as vt,p as P,g as Y,a as N,k as s,G as g,a3 as M,c as I,r as q,s as W,f as T,t as J,aO as Te,aP as dt,aQ as G,aR as Ae,l as Re}from"../chunks/runtime.DJK5OjHR.js";import{i as S,c as _t,o as _e,a as Fe}from"../chunks/index-client.Ch5NUNdE.js";import{r as Pe,s as O,e as te,i as ae,a as Ne}from"../chunks/attributes.Cg3wPQw7.js";import{i as ht,a as U,p as E}from"../chunks/props.nCNZolO7.js";import{b as mt,l as ze,d as De,e as oe,s as He}from"../chunks/render.DJPECFcd.js";import{b as Oe}from"../chunks/this.BMMHvvYX.js";import{b as he}from"../chunks/paths.Wm1Rnjzg.js";import{s as Ue,g as We,i as gt,P as re,j as yt,t as qe,T as Ce}from"../chunks/Placeholder.BmwCSx2O.js";import{a as R,R as Be}from"../chunks/RecordCard.CzCe-meg.js";import"../chunks/legacy.CUdD9rQp.js";import{i as Ke}from"../chunks/lifecycle.Cw7vQPVc.js";import{a as bt}from"../chunks/albums.controller.BlcZQjo6.js";import{A as wt}from"../chunks/AlbumGrid.D-_iMi7h.js";import{d as pt}from"../chunks/downloader.controller.BFOUfmJS.js";import{t as kt}from"../chunks/telegram.service.BtJAcorA.js";import{a as Tt}from"../chunks/artists.controller.BKB_Q1h5.js";function At(t,e,a){X&&tt();var r=t,l=lt,f,n=xe()?Ye:$e;et(()=>{n(l,l=e())&&(f&&at(f),f=rt(()=>a(r)))}),X&&(r=st)}const Rt=()=>performance.now(),H={tick:t=>requestAnimationFrame(t),now:()=>Rt(),tasks:new Set};function Qe(t){H.tasks.forEach(e=>{e.c(t)||(H.tasks.delete(e),e.f())}),H.tasks.size!==0&&H.tick(Qe)}function qt(t){let e;return H.tasks.size===0&&H.tick(Qe),{promise:new Promise(a=>{H.tasks.add(e={c:t,f:a})}),abort(){H.tasks.delete(e)}}}function Z(t,e){t.dispatchEvent(new CustomEvent(e))}function Ct(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Ee(t){const e={},a=t.split(";");for(const r of a){const[l,f]=r.split(":");if(!l||f===void 0)break;const n=Ct(l.trim());e[n]=f.trim()}return e}const Et=t=>t;function St(t,e,a,r){var l=(t&ft)!==0,f="both",n,u=e.inert,c,o;function i(){var v=ut,k=we;pe(null),ke(null);try{return n??(n=a()(e,(r==null?void 0:r())??{},{direction:f}))}finally{pe(v),ke(k)}}var d={is_global:l,in(){e.inert=u,Z(e,"introstart"),c=ve(e,i(),o,1,()=>{Z(e,"introend"),c==null||c.abort(),c=n=void 0})},out(v){e.inert=!0,Z(e,"outrostart"),o=ve(e,i(),c,0,()=>{Z(e,"outroend"),v==null||v()})},stop:()=>{c==null||c.abort(),o==null||o.abort()}},m=we;if((m.transitions??(m.transitions=[])).push(d),mt){var _=l;if(!_){for(var h=m.parent;h&&h.f&nt;)for(;(h=h.parent)&&!(h.f&ot););_=!h||(h.f&it)!==0}_&&Me(()=>{Ie(()=>d.in())})}}function ve(t,e,a,r,l){var f=r===1;if(ct(e)){var n,u=!1;return ue(()=>{if(!u){var k=e({direction:f?"in":"out"});n=ve(t,k,a,r,l)}}),{abort:()=>{u=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return l(),{abort:j,deactivate:j,reset:j,t:()=>r};const{delay:c=0,css:o,tick:i,easing:d=Et}=e;var m=[];if(f&&a===void 0&&(i&&i(0,1),o)){var _=Ee(o(0,1));m.push(_,_)}var h=()=>1-r,v=t.animate(m,{duration:c});return v.onfinish=()=>{var k=(a==null?void 0:a.t())??1-r;a==null||a.abort();var L=r-k,w=e.duration*Math.abs(L),b=[];if(w>0){if(o)for(var A=Math.ceil(w/16.666666666666668),p=0;p<=A;p+=1){var K=k+L*d(p/A),se=o(K,1-K);b.push(Ee(se))}h=()=>{var z=v.currentTime;return k+L*d(z/w)},i&&qt(()=>{if(v.playState!=="running")return!1;var z=h();return i(z,1-z),!0})}v=t.animate(b,{duration:w,fill:"forwards"}),v.onfinish=()=>{h=()=>r,i==null||i(r,1-r),l()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=j)},deactivate:()=>{l=j},reset:()=>{r===0&&(i==null||i(1,0))},t:()=>h()}}function xt(t,e,a=e){var r=xe();ze(t,"input",()=>{var l=ce(t)?fe(t.value):t.value;a(l),r&&l!==(l=e())&&(t.value=l??"")}),Le(()=>{var l=e();if(X&&t.defaultValue!==t.value){a(ce(t)?fe(t.value):t.value);return}ce(t)&&l===fe(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}const ie=new Set;function Mt(t,e,a,r,l=r){var f=a.getAttribute("type")==="checkbox",n=t;let u=!1;if(e!==null)for(var c of e)n=n[c]??(n[c]=[]);n.push(a),ze(a,"change",()=>{var o=a.__value;f&&(o=Se(n,o,a.checked)),l(o)},()=>l(f?[]:null)),Le(()=>{var o=r();if(X&&a.defaultChecked!==a.checked){u=!0;return}f?(o=o||[],a.checked=o.includes(a.__value)):a.checked=ht(a.__value,o)}),vt(()=>{var o=n.indexOf(a);o!==-1&&n.splice(o,1)}),ie.has(n)||(ie.add(n),ue(()=>{n.sort((o,i)=>o.compareDocumentPosition(i)===4?-1:1),ie.delete(n)})),ue(()=>{if(u){var o;if(f)o=Se(n,o,a.checked);else{var i=n.find(d=>d.checked);o=i==null?void 0:i.__value}l(o)}})}function Se(t,e,a){for(var r=new Set,l=0;l<t.length;l+=1)t[l].checked&&r.add(t[l].__value);return a||r.delete(e),Array.from(r)}function ce(t){var e=t.type;return e==="number"||e==="range"}function fe(t){return t===""?null:+t}var D,B,V,$,je;const ee=class ee{constructor(e){Q(this,$);Q(this,D,new WeakMap);Q(this,B);Q(this,V);ne(this,V,e)}observe(e,a){var r=F(this,D).get(e)||new Set;return r.add(a),F(this,D).set(e,r),be(this,$,je).call(this).observe(e,F(this,V)),()=>{var l=F(this,D).get(e);l.delete(a),l.size===0&&(F(this,D).delete(e),F(this,B).unobserve(e))}}};D=new WeakMap,B=new WeakMap,V=new WeakMap,$=new WeakSet,je=function(){return F(this,B)??ne(this,B,new ResizeObserver(e=>{for(var a of e){ee.entries.set(a.target,a);for(var r of F(this,D).get(a.target)||[])r(a)}}))},ye(ee,"entries",new WeakMap);let de=ee;var It=new de({box:"border-box"});function Lt(t,e,a){var r=It.observe(t,()=>a(t[e]));Me(()=>(Ie(()=>a(t[e])),r))}var Ft=(t,e)=>g(e,""),Pt=C('<input type="reset" value="" class="w-4 h-4">'),Nt=C('<form class="form"><div class="w-full searchbar flex items-center"><label class="w-full"><input type="search" id="search_record" class="bg-transparent w-full border-none outline-0" placeholder="What do you want to listen to?" required></label> <!></div></form>');function zt(t,e){P(e,!0);const a=()=>{var d;(d=s(l))==null||d.blur(),e.search(s(r))};let r=M(""),l=M(void 0),f=M(!1);Y(()=>e.changeInputQuery(s(r))),Y(()=>e.changeInputFocuse(s(f)));var n=Nt(),u=I(n),c=I(u),o=I(c);Pe(o),Oe(o,d=>g(l,d),()=>s(l)),q(c);var i=W(c,2);S(i,()=>s(r),d=>{var m=Pt();m.__click=[Ft,r],O(m,"style",`background: url(${he??""}/close.svg)`),y(d,m)}),q(u),q(n),oe("submit",n,a),oe("focus",o,()=>g(f,!0)),oe("blur",o,()=>g(f,!1)),xt(o,()=>s(r),d=>g(r,d)),y(t,n),N()}De(["click"]);function Dt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ht(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Ot(t,{delay:e=0,duration:a=400,easing:r=Dt,amount:l=5,opacity:f=0}={}){const n=getComputedStyle(t),u=+n.opacity,c=n.filter==="none"?"":n.filter,o=u*(1-f),[i,d]=Ht(l);return{delay:e,duration:a,easing:r,css:(m,_)=>`opacity: ${u-o*_}; filter: ${c} blur(${_*i}${d});`}}var Ut=C('<input type="radio" name="record-type" class="hidden"> <label> </label>',1),Wt=C('<div class="filter"></div>');function Bt(t,e){P(e,!0);const a=[];let r=U(e,"requestType",15),l=[{type:R.Album},{type:R.Track}];Y(()=>e.changeRequestType(r()));var f=x(),n=T(f);S(n,()=>r()!==R.Release,u=>{var c=Wt();te(c,21,()=>l,ae,(o,i)=>{var d=Ut(),m=T(d);Pe(m);var _,h=W(m,2),v=I(h,!0);q(h),J(()=>{_!==(_=s(i).type)&&(m.value=(m.__value=s(i).type)==null?"":s(i).type),O(m,"id",`request_${s(i).type}`),O(h,"for",`request_${s(i).type}`),Ue(h,`filter-button
      ${(s(i).type===r()?"active":"")??""}`),He(v,s(i).type)}),Mt(a,[],m,()=>(s(i).type,r()),r),y(o,d)}),q(c),St(3,c,()=>Ot),y(u,c)}),y(t,f),N()}class Kt{async getReleases(){return(await We(gt)).result}}const Qt=new Kt;class jt{async getReleases(){return await Qt.getReleases()}}const Gt=new jt;var Vt=C('<a class="record"><!></a>'),Jt=C('<div class="album-grid"></div>');function Zt(t,e){P(e,!1);async function a(){return await Gt.getReleases()}Ke();var r=x(),l=T(r);Ne(l,a,f=>{re(f,{count:4,_class:"album-grid"})},(f,n)=>{var u=Jt();te(u,5,()=>s(n),ae,(c,o)=>{var i=Vt(),d=I(i);Be(d,{get record(){return s(o)},get requestType(){return R.Release}}),q(i),J(()=>O(i,"href",`${he??""}/album?albumUrl=${s(o).youTubeMusicPlaylistUrl??""}`)),y(c,i)}),q(u),y(f,u)}),y(t,r),N()}var Xt=C('<div id="svelte-infinite-scroll" style="width: 0;"></div>');function Ge(t,e){P(e,!1);let a=U(e,"threshold",8,0),r=U(e,"horizontal",8,!1),l=U(e,"elementScroll",8,null),f=U(e,"hasMore",8,!0),n=U(e,"reverse",8,!1),u=U(e,"window",8,!1);const c=_t();let o=G(!1),i=G(),d=G(),m=G(),_=G();const h=w=>{if(!f())return;const b=w.target;v(b,n(),r())<=a()?(!s(o)&&f()&&(c("loadMore"),g(d,b.scrollHeight),g(m,b.scrollTop)),g(o,!0)):g(o,!1)},v=(w,b,A)=>{const p=w.documentElement?w.documentElement:w;return b?A?p.scrollLeft:p.scrollTop:A?p.scrollWidth-p.clientWidth-p.scrollLeft:p.scrollHeight-p.clientHeight-p.scrollTop};_e(()=>{u()?g(_,document):l()?g(_,l()):g(_,s(i).parentNode)}),Fe(()=>{s(_)&&(s(_).removeEventListener("scroll",h),s(_).removeEventListener("resize",h))}),Te(()=>(s(_),Re(n())),()=>{s(_)&&(n()&&Ae(_,s(_).scrollTop=s(_).scrollHeight),s(_).addEventListener("scroll",h),s(_).addEventListener("resize",h))}),Te(()=>(s(o),Re(n()),s(_),s(d),s(m)),()=>{s(o)&&n()&&Ae(_,s(_).scrollTop=s(_).scrollHeight-s(d)+s(m))}),dt(),Ke();var k=x(),L=T(k);S(L,()=>!u()&&!l(),w=>{var b=Xt();Oe(b,A=>g(i,A),()=>s(i)),y(w,b)}),y(t,k),N()}var Yt=C('<div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-5 w-5 animate-spin text-black dark:text-white"><circle style="opacity: 0.05" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path style="opacity: 1" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>');function $t(t,e){var a=Yt();J(()=>Ue(a,`${e.stylingClass} flex justify-center`)),y(t,a)}var ea=C("<!> <!>",1);function ta(t,e){P(e,!0);const a=async()=>await bt.getAlbums(e.query);async function r(){g(n,!0),g(l,E(await a())),f.push(...s(l)),g(n,!1)}let l=M(E([])),f=E([]),n=M(!1),u=M(!1);_e(async()=>{g(u,!0),await r(),g(u,!1)});var c=x(),o=T(c);S(o,()=>s(u),i=>{re(i,{count:4,_class:"album-grid"})},i=>{var d=x(),m=T(d);S(m,()=>f.length,_=>{var h=ea(),v=T(h);wt(v,{get records(){return f},children:(L,w)=>{var b=x(),A=T(b);S(A,()=>s(n),p=>{$t(p,{stylingClass:"col-span-2 h-4"})}),y(L,b)},$$slots:{default:!0}});var k=W(v,2);Ge(k,{threshold:100,window:!0,$$events:{loadMore:r}}),y(_,h)},null,!0),y(i,d)}),y(t,c),N()}class aa{async getTracks(e){return(await We(yt,{params:{query:e}})).result}}const ra=new aa;class sa{async getTracks(e){return await ra.getTracks(e)}}const la=new sa;var na=(t,e,a)=>{t.preventDefault(),e(s(a).youTubeMusicPlaylistUrl)},oa=C('<a href="/" class="record"><!></a>'),ia=C('<div class="track-list"></div> <!>',1);function ca(t,e){P(e,!0);let a=M(E([])),r=M(E([])),l=M(!1);async function f(i){await pt.download(i,2),kt.closeWith("success")}const n=async()=>await la.getTracks(e.query);async function u(){g(a,E(await n())),g(r,E(s(r).concat(s(a))))}_e(async()=>{g(l,!0),await u(),g(l,!1)});var c=x(),o=T(c);S(o,()=>s(l),i=>{re(i,{count:4,_class:"track-list"})},i=>{var d=x(),m=T(d);S(m,()=>s(r).length,_=>{var h=ia(),v=T(h);te(v,21,()=>s(r),ae,(L,w)=>{var b=oa();b.__click=[na,f,w];var A=I(b);Be(A,{get record(){return s(w)},get requestType(){return R.Track}}),q(b),y(L,b)}),q(v);var k=W(v,2);Ge(k,{threshold:100,window:!0,$$events:{loadMore:u}}),y(_,h)},null,!0),y(i,d)}),y(t,c),N()}De(["click"]);var fa=C('<a><img class="cover"> <div class="text-[12px]"><p class="font-semibold leading-tight"> </p></div></a>');function ua(t,e){P(e,!0);var a=fa(),r=I(a),l=W(r,2),f=I(l),n=I(f,!0);q(f),q(l),q(a),J(()=>{O(a,"href",`${he??""}/artist?artistId=${e.artist.youTubeMusicUrl??""}&artistName=${e.artist.title??""}`),O(r,"src",e.artist.imageUrl),O(r,"alt",e.artist.title),He(n,e.artist.title)}),y(t,a),N()}var va=C('<div class="artist-list"></div>');function da(t,e){P(e,!0);const a=async()=>await Tt.getArtists(e.query);var r=x(),l=T(r);Ne(l,a,f=>{re(f,{count:4,_class:"artist-list"})},(f,n)=>{var u=va();te(u,21,()=>s(n),ae,(c,o)=>{ua(c,{get artist(){return s(o)}})}),q(u),y(f,u)}),y(t,r),N()}var _a=C("<div><!></div>"),ha=C('<div class="top-bar"><div class="flex"><!></div> <!></div> <!>',1);function Fa(t,e){P(e,!0);const a=v=>g(c,E(v));function r(v){v?s(c)===R.Release&&a(R.Album):s(u)===void 0&&(s(c),R.Release)}function l(v){n=v,n?s(c)===R.Release&&g(c,E(R.Album)):(g(u,""),g(c,E(R.Release)))}let f=M(void 0),n="",u=M(""),c=M(E(R.Release));Y(()=>{n=n,g(c,E(s(c))),qe.clearTokens(Ce)}),Fe(()=>qe.clearTokens(Ce));var o=ha(),i=T(o),d=I(i),m=I(d);zt(m,{search:v=>g(u,E(v)),changeInputQuery:l,changeInputFocuse:r}),q(d);var _=W(d,2);Bt(_,{changeRequestType:a,get requestType(){return s(c)}}),q(i);var h=W(i,2);At(h,()=>()=>({query:s(u),requestType:s(c)}),v=>{var k=_a(),L=I(k);S(L,()=>s(u)!=="",w=>{var b=x(),A=T(b);S(A,()=>s(c)===R.Album,p=>{ta(p,{get query(){return s(u)}})},p=>{var K=x(),se=T(K);S(se,()=>s(c)===R.Track,z=>{ca(z,{get query(){return s(u)}})},z=>{var me=x(),Ve=T(me);S(Ve,()=>s(c)===R.Artist,Je=>{da(Je,{get query(){return s(u)}})},null,!0),y(z,me)},!0),y(p,K)}),y(w,b)},w=>{var b=x(),A=T(b);S(A,()=>s(c)===R.Release,p=>{Zt(p,{})},null,!0),y(w,b)}),q(k),J(()=>O(k,"style",`margin-top: ${s(f)??""}px`)),y(v,k)}),Lt(i,"clientHeight",v=>g(f,v)),y(t,o),N()}export{Fa as component};
