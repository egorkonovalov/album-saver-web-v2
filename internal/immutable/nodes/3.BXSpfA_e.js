import{e as O}from"../chunks/index.CzR0xuCU.js";import{a as j}from"../chunks/albums.controller.sRGSdbTG.js";import{b as d,t as u}from"../chunks/disclose-version.Bxxz4Q4y.js";import{a0 as z,t as H,a1 as q,b as F,x as I,g as e,y as s,A as _,z as n,v as N,w as M,F as B}from"../chunks/utils.BDNkSeAY.js";import{d as R,a as y}from"../chunks/store.BvG3WA17.js";import{b as P,P as E,e as G,i as J}from"../chunks/Placeholder.2R4Hn2L-.js";import{o as K,a as L,i as Q}from"../chunks/index-client.Bb9ySHye.js";import{s as T}from"../chunks/attributes.C3MDAjnC.js";import{p}from"../chunks/props.b-v-kYDU.js";import{b as V}from"../chunks/paths.Hoct4GZC.js";import"../chunks/legacy.BvmqPg87.js";import{d as U}from"../chunks/downloader.controller.DJ043ikY.js";function W(r,a){let t=r.searchParams.get(a);if(t)return t;O(500,`The value for the parameter "${a}" was not provided.`)}const X=async({url:r,parent:a})=>{const t=W(r,"albumUrl"),{environmentStore:h}=await a();return{environmentStore:h,albumUrl:t,streamed:{album:j.getAlbum(t)}}},_a=Object.freeze(Object.defineProperty({__proto__:null,load:X},Symbol.toStringTag,{value:"Module"}));var Y=u('<span class="artwork bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse aspect-square"></span> <span class="h-5 w-20 rounded-md self-center bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse my-3"></span> <span class="h-3 w-32 rounded-md self-center bg-[color:var(--tg-theme-secondary-bg-color)] animate-pulse"></span>',1);function Z(r){var a=Y();z(4),d(r,a)}var $=u('<img class="artwork" alt="cover"> <div class="headings"><h3 class="title"> </h3> <p> </p></div>',1),aa=(r,a,t)=>a(e(t).youTubeMusicPlaylistUrl),ta=u('<img alt="check" class="h-5 w-5">'),ea=u('<li><button class="track"><p> </p></button> <!></li>'),oa=u('<ul class="track-list"></ul>'),ra=u('<div class="album-entry"><!> <!></div>');function ha(r,a){H(a,!0);let t=q(p([]));function h(o){e(t).includes(o)?(e(t).splice(e(t).indexOf(o),1),B(t,p(e(t)))):B(t,p([...e(t),o])),a.data.environmentStore.envokeHaptic("light")}async function f(o){e(t).length>0?await U.downloadSet(e(t)):o&&await U.download(o,1),a.data.environmentStore.envokeHaptic("heavy"),a.data.environmentStore.close()}F(()=>{e(t).length>0?(a.data.environmentStore.setMainButtonText(`Download Tracks (${e(t).length})`),a.data.environmentStore.onMainButtonClick(f)):(a.data.environmentStore.setMainButtonText("Download Album"),a.data.environmentStore.onMainButtonClick(()=>f(a.data.albumUrl)))}),K(async()=>{a.data.environmentStore.showMainButton("Download Album"),a.data.environmentStore.onMainButtonClick(()=>f(a.data.albumUrl))}),L(()=>{a.data.environmentStore.offMainButtonClick(()=>f(a.data.albumUrl)),a.data.environmentStore.hideMainButton()});var w=ra(),S=s(w);P(S,()=>a.data.streamed.album,o=>{Z(o,{})},(o,v)=>{var i=$(),g=N(i),m=_(g,2),l=s(m),c=s(l,!0);n(l);var b=_(l,2),k=s(b,!0);n(b),n(m),M(()=>{T(g,"src",e(v).albumImage),y(c,e(v).albumTitle),y(k,e(v).artistName)}),d(o,i)});var C=_(S,2);P(C,()=>a.data.streamed.album,o=>{E(o,{count:8,_class:"album-entry track-list mt-0"})},(o,v)=>{var i=oa();G(i,21,()=>e(v).result,J,(g,m)=>{var l=ea(),c=s(l);c.__click=[aa,h,m];var b=s(c),k=s(b,!0);n(b),n(c);var A=_(c,2);Q(A,()=>e(t).includes(e(m).youTubeMusicPlaylistUrl),D=>{var x=ta();T(x,"src",`${V??""}/check-circle.svg`),d(D,x)}),n(l),M(()=>y(k,e(m).title)),d(g,l)}),n(i),d(o,i)}),n(w),d(r,w),I()}R(["click"]);export{ha as component,_a as universal};
