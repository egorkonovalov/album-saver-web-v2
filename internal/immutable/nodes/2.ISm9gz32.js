var Je=Object.defineProperty;var ye=a=>{throw TypeError(a)};var Xe=(a,e,t)=>e in a?Je(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var be=(a,e,t)=>Xe(a,typeof e!="symbol"?e+"":e,t),le=(a,e,t)=>e.has(a)||ye("Cannot "+t);var F=(a,e,t)=>(le(a,e,"read from private field"),t?t.call(a):e.get(a)),j=(a,e,t)=>e.has(a)?ye("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),ie=(a,e,t,r)=>(le(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t),we=(a,e,t)=>(le(a,e,"access private method"),t);import{b as y,t as C,c as M}from"../chunks/disclose-version.Bxxz4Q4y.js";import{ay as Me,aK as Ye,k as $e,a2 as ea,l as $,a6 as aa,a5 as ta,a4 as ra,ac as sa,U as na,a7 as la,aL as ia,aM as oa,e as Ie,u as Le,H as ke,aN as ca,q as ve,n as V,aO as ua,ai as pe,O as Te,aj as fa,r as Fe,ak as va,t as N,b as ee,x as z,g as s,F as g,a1 as I,y as S,z as T,A as O,v as A,w as Q,aP as Re,aQ as da,aR as G,aS as qe,h as Ae}from"../chunks/utils.BDNkSeAY.js";import{i as E,c as _a,o as he,a as Pe}from"../chunks/index-client.Bb9ySHye.js";import{r as Ne,s as P}from"../chunks/attributes.C3MDAjnC.js";import{i as ha,a as B,p as x}from"../chunks/props.b-v-kYDU.js";import{e as ma,l as ze,d as He,f as oe,a as Ue}from"../chunks/store.BvG3WA17.js";import{b as De}from"../chunks/this.CXUni9eI.js";import{b as re}from"../chunks/paths.Hoct4GZC.js";import{e as J,s as Oe,i as X,g as We,l as ga,b as Be,P as se,m as ya,t as Ce,T as Se}from"../chunks/Placeholder.2R4Hn2L-.js";import{b as q,R as me,a as ba}from"../chunks/artists.controller.DyDN6bEc.js";import"../chunks/legacy.BvmqPg87.js";import{i as Ke}from"../chunks/lifecycle.BYmdhEO6.js";import{a as wa}from"../chunks/albums.controller.sRGSdbTG.js";import{d as ka}from"../chunks/downloader.controller.DJ043ikY.js";function pa(a,e,t){$&&aa();var r=a,n=na,u,l=Me()?Ye:$e;ea(()=>{l(n,n=e())&&(u&&ta(u),u=ra(()=>t(r)))}),$&&(r=sa)}const Ta=()=>performance.now(),D={tick:a=>requestAnimationFrame(a),now:()=>Ta(),tasks:new Set};function Qe(a){D.tasks.forEach(e=>{e.c(a)||(D.tasks.delete(e),e.f())}),D.tasks.size!==0&&D.tick(Qe)}function Ra(a){let e;return D.tasks.size===0&&D.tick(Qe),{promise:new Promise(t=>{D.tasks.add(e={c:a,f:t})}),abort(){D.tasks.delete(e)}}}function Y(a,e){a.dispatchEvent(new CustomEvent(e))}function qa(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const e=a.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function xe(a){const e={},t=a.split(";");for(const r of t){const[n,u]=r.split(":");if(!n||u===void 0)break;const l=qa(n.trim());e[l]=u.trim()}return e}const Aa=a=>a;function Ca(a,e,t,r){var n=(a&ua)!==0,u="both",l,f=e.inert,c,i;function o(){var v=fa,p=ke;pe(null),Te(null);try{return l??(l=t()(e,(r==null?void 0:r())??{},{direction:u}))}finally{pe(v),Te(p)}}var d={is_global:n,in(){e.inert=f,Y(e,"introstart"),c=de(e,o(),i,1,()=>{Y(e,"introend"),c==null||c.abort(),c=l=void 0})},out(v){e.inert=!0,Y(e,"outrostart"),i=de(e,o(),c,0,()=>{Y(e,"outroend"),v==null||v()})},stop:()=>{c==null||c.abort(),i==null||i.abort()}},m=ke;if((m.transitions??(m.transitions=[])).push(d),ma){var _=n;if(!_){for(var h=m.parent;h&&h.f&la;)for(;(h=h.parent)&&!(h.f&ia););_=!h||(h.f&oa)!==0}_&&Ie(()=>{Le(()=>d.in())})}}function de(a,e,t,r,n){var u=r===1;if(ca(e)){var l,f=!1;return ve(()=>{if(!f){var p=e({direction:u?"in":"out"});l=de(a,p,t,r,n)}}),{abort:()=>{f=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return n(),{abort:V,deactivate:V,reset:V,t:()=>r};const{delay:c=0,css:i,tick:o,easing:d=Aa}=e;var m=[];if(u&&t===void 0&&(o&&o(0,1),i)){var _=xe(i(0,1));m.push(_,_)}var h=()=>1-r,v=a.animate(m,{duration:c});return v.onfinish=()=>{var p=(t==null?void 0:t.t())??1-r;t==null||t.abort();var L=r-p,k=e.duration*Math.abs(L),b=[];if(k>0){if(i)for(var R=Math.ceil(k/16.666666666666668),w=0;w<=R;w+=1){var W=p+L*d(w/R),ne=i(W,1-W);b.push(xe(ne))}h=()=>{var H=v.currentTime;return p+L*d(H/k)},o&&Ra(()=>{if(v.playState!=="running")return!1;var H=h();return o(H,1-H),!0})}v=a.animate(b,{duration:k,fill:"forwards"}),v.onfinish=()=>{h=()=>r,o==null||o(r,1-r),n()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=V)},deactivate:()=>{n=V},reset:()=>{r===0&&(o==null||o(1,0))},t:()=>h()}}function Sa(a,e,t=e){var r=Me();ze(a,"input",()=>{var n=ue(a)?fe(a.value):a.value;t(n),r&&n!==(n=e())&&(a.value=n??"")}),Fe(()=>{var n=e();if($&&a.defaultValue!==a.value){t(ue(a)?fe(a.value):a.value);return}ue(a)&&n===fe(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}const ce=new Set;function xa(a,e,t,r,n=r){var u=t.getAttribute("type")==="checkbox",l=a;let f=!1;if(e!==null)for(var c of e)l=l[c]??(l[c]=[]);l.push(t),ze(t,"change",()=>{var i=t.__value;u&&(i=Ee(l,i,t.checked)),n(i)},()=>n(u?[]:null)),Fe(()=>{var i=r();if($&&t.defaultChecked!==t.checked){f=!0;return}u?(i=i||[],t.checked=i.includes(t.__value)):t.checked=ha(t.__value,i)}),va(()=>{var i=l.indexOf(t);i!==-1&&l.splice(i,1)}),ce.has(l)||(ce.add(l),ve(()=>{l.sort((i,o)=>i.compareDocumentPosition(o)===4?-1:1),ce.delete(l)})),ve(()=>{if(f){var i;if(u)i=Ee(l,i,t.checked);else{var o=l.find(d=>d.checked);i=o==null?void 0:o.__value}n(i)}})}function Ee(a,e,t){for(var r=new Set,n=0;n<a.length;n+=1)a[n].checked&&r.add(a[n].__value);return t||r.delete(e),Array.from(r)}function ue(a){var e=a.type;return e==="number"||e==="range"}function fe(a){return a===""?null:+a}var U,K,Z,ae,je;const te=class te{constructor(e){j(this,ae);j(this,U,new WeakMap);j(this,K);j(this,Z);ie(this,Z,e)}observe(e,t){var r=F(this,U).get(e)||new Set;return r.add(t),F(this,U).set(e,r),we(this,ae,je).call(this).observe(e,F(this,Z)),()=>{var n=F(this,U).get(e);n.delete(t),n.size===0&&(F(this,U).delete(e),F(this,K).unobserve(e))}}};U=new WeakMap,K=new WeakMap,Z=new WeakMap,ae=new WeakSet,je=function(){return F(this,K)??ie(this,K,new ResizeObserver(e=>{for(var t of e){te.entries.set(t.target,t);for(var r of F(this,U).get(t.target)||[])r(t)}}))},be(te,"entries",new WeakMap);let _e=te;var Ea=new _e({box:"border-box"});function Ma(a,e,t){var r=Ea.observe(a,()=>t(a[e]));Ie(()=>(Le(()=>t(a[e])),r))}var Ia=(a,e)=>g(e,""),La=C('<input type="reset" value="" class="w-4 h-4">'),Fa=C('<form class="form"><div class="w-full searchbar flex items-center"><label class="w-full"><input type="search" id="search_record" class="bg-transparent w-full border-none outline-0" placeholder="What do you want to listen to?" required></label> <!></div></form>');function Pa(a,e){N(e,!0);const t=()=>{var d;(d=s(n))==null||d.blur(),e.search(s(r))};let r=I(""),n=I(void 0),u=I(!1);ee(()=>e.changeInputQuery(s(r))),ee(()=>e.changeInputFocuse(s(u)));var l=Fa(),f=S(l),c=S(f),i=S(c);Ne(i),De(i,d=>g(n,d),()=>s(n)),T(c);var o=O(c,2);E(o,()=>s(r),d=>{var m=La();m.__click=[Ia,r],P(m,"style",`background: url(${re??""}/close.svg)`),y(d,m)}),T(f),T(l),oe("submit",l,t),oe("focus",i,()=>g(u,!0)),oe("blur",i,()=>g(u,!1)),Sa(i,()=>s(r),d=>g(r,d)),y(a,l),z()}He(["click"]);function Na(a){return a<.5?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function za(a){const e=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[a,"px"]}function Ha(a,{delay:e=0,duration:t=400,easing:r=Na,amount:n=5,opacity:u=0}={}){const l=getComputedStyle(a),f=+l.opacity,c=l.filter==="none"?"":l.filter,i=f*(1-u),[o,d]=za(n);return{delay:e,duration:t,easing:r,css:(m,_)=>`opacity: ${f-i*_}; filter: ${c} blur(${_*o}${d});`}}var Ua=C('<input type="radio" name="record-type" class="hidden"> <label> </label>',1),Da=C('<div class="filter"></div>');function Oa(a,e){N(e,!0);const t=[];let r=B(e,"requestType",15),n=[{type:q.Album},{type:q.Track}];ee(()=>e.changeRequestType(r()));var u=M(),l=A(u);E(l,()=>r()!==q.Release,f=>{var c=Da();J(c,21,()=>n,X,(i,o)=>{var d=Ua(),m=A(d);Ne(m);var _,h=O(m,2),v=S(h,!0);T(h),Q(()=>{_!==(_=s(o).type)&&(m.value=(m.__value=s(o).type)==null?"":s(o).type),P(m,"id",`request_${s(o).type}`),P(h,"for",`request_${s(o).type}`),Oe(h,`filter-button
      ${(s(o).type===r()?"active":"")??""}`),Ue(v,s(o).type)}),xa(t,[],m,()=>(s(o).type,r()),r),y(i,d)}),T(c),Ca(3,c,()=>Ha),y(f,c)}),y(a,u),z()}class Wa{async getReleases(){return(await We(ga)).result}}const Ba=new Wa;class Ka{async getReleases(){return await Ba.getReleases()}}const Qa=new Ka;var ja=C('<a class="record"><!></a>'),Va=C('<div class="album-grid"></div>');function Ga(a,e){N(e,!1);async function t(){return await Qa.getReleases()}Ke();var r=M(),n=A(r);Be(n,t,u=>{se(u,{count:4,_class:"album-grid"})},(u,l)=>{var f=Va();J(f,5,()=>s(l),X,(c,i)=>{var o=ja(),d=S(o);me(d,{get record(){return s(i)},get requestType(){return q.Release}}),T(o),Q(()=>P(o,"href",`${re??""}/album?albumUrl=$${s(i).youTubeMusicPlaylistUrl??""}`)),y(c,o)}),T(f),y(u,f)}),y(a,r),z()}var Za=C('<div id="svelte-infinite-scroll" style="width: 0;"></div>');function Ve(a,e){N(e,!1);let t=B(e,"threshold",8,0),r=B(e,"horizontal",8,!1),n=B(e,"elementScroll",8,null),u=B(e,"hasMore",8,!0),l=B(e,"reverse",8,!1),f=B(e,"window",8,!1);const c=_a();let i=G(!1),o=G(),d=G(),m=G(),_=G();const h=k=>{if(!u())return;const b=k.target;v(b,l(),r())<=t()?(!s(i)&&u()&&(c("loadMore"),g(d,b.scrollHeight),g(m,b.scrollTop)),g(i,!0)):g(i,!1)},v=(k,b,R)=>{const w=k.documentElement?k.documentElement:k;return b?R?w.scrollLeft:w.scrollTop:R?w.scrollWidth-w.clientWidth-w.scrollLeft:w.scrollHeight-w.clientHeight-w.scrollTop};he(()=>{f()?g(_,document):n()?g(_,n()):g(_,s(o).parentNode)}),Pe(()=>{s(_)&&(s(_).removeEventListener("scroll",h),s(_).removeEventListener("resize",h))}),Re(()=>(s(_),Ae(l())),()=>{s(_)&&(l()&&qe(_,s(_).scrollTop=s(_).scrollHeight),s(_).addEventListener("scroll",h),s(_).addEventListener("resize",h))}),Re(()=>(s(i),Ae(l()),s(_),s(d),s(m)),()=>{s(i)&&l()&&qe(_,s(_).scrollTop=s(_).scrollHeight-s(d)+s(m))}),da(),Ke();var p=M(),L=A(p);E(L,()=>!f()&&!n(),k=>{var b=Za();De(b,R=>g(o,R),()=>s(o)),y(k,b)}),y(a,p),z()}var Ja=C('<div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-5 w-5 animate-spin text-black dark:text-white"><circle style="opacity: 0.05" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path style="opacity: 1" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>');function Xa(a,e){var t=Ja();Q(()=>Oe(t,`${e.stylingClass} flex justify-center`)),y(a,t)}var Ya=C('<a class="record"><!></a>'),$a=C('<div class="album-grid"><!> <!></div> <!>',1);function et(a,e){N(e,!0);const t=async()=>await wa.getAlbums(e.query);async function r(){g(l,!0),g(n,x(await t())),u.push(...s(n)),g(l,!1)}let n=I(x([])),u=x([]),l=I(!1),f=I(!1);he(async()=>{g(f,!0),await r(),g(f,!1)});var c=M(),i=A(c);E(i,()=>s(f),o=>{se(o,{count:4,_class:"album-grid"})},o=>{var d=M(),m=A(d);E(m,()=>u.length,_=>{var h=$a(),v=A(h),p=S(v);J(p,17,()=>u,X,(b,R)=>{var w=Ya(),W=S(w);me(W,{get record(){return s(R)},get requestType(){return q.Release}}),T(w),Q(()=>P(w,"href",`${re??""}/album?albumUrl=$${s(R).youTubeMusicPlaylistUrl??""}`)),y(b,w)});var L=O(p,2);E(L,()=>s(l),b=>{Xa(b,{stylingClass:"col-span-2 h-4"})}),T(v);var k=O(v,2);Ve(k,{threshold:100,window:!0,$$events:{loadMore:r}}),y(_,h)},null,!0),y(o,d)}),y(a,c),z()}class at{async getTracks(e){return(await We(ya,{params:{query:e}})).result}}const tt=new at;class rt{async getTracks(e){return await tt.getTracks(e)}}const st=new rt;var nt=(a,e,t)=>{a.preventDefault(),e(s(t).youTubeMusicPlaylistUrl)},lt=C('<a href="/" class="record"><!></a>'),it=C('<div class="track-list"></div> <!>',1);function ot(a,e){N(e,!0);let t=I(x([])),r=I(x([])),n=I(!1);async function u(o){await ka.download(o,2),e.environment.envokeHaptic("heavy"),e.environment.close()}const l=async()=>await st.getTracks(e.query);async function f(){g(t,x(await l())),g(r,x(s(r).concat(s(t))))}he(async()=>{g(n,!0),await f(),g(n,!1)});var c=M(),i=A(c);E(i,()=>s(n),o=>{se(o,{count:4,_class:"track-list"})},o=>{var d=M(),m=A(d);E(m,()=>s(r).length,_=>{var h=it(),v=A(h);J(v,21,()=>s(r),X,(L,k)=>{var b=lt();b.__click=[nt,u,k];var R=S(b);me(R,{get record(){return s(k)},get requestType(){return q.Track}}),T(b),y(L,b)}),T(v);var p=O(v,2);Ve(p,{threshold:100,window:!0,$$events:{loadMore:f}}),y(_,h)},null,!0),y(o,d)}),y(a,c),z()}He(["click"]);var ct=C('<a><img class="cover"> <div class="text-[12px]"><p class="font-semibold leading-tight"> </p></div></a>');function ut(a,e){N(e,!0);var t=ct(),r=S(t),n=O(r,2),u=S(n),l=S(u,!0);T(u),T(n),T(t),Q(()=>{P(t,"href",`${re??""}/artist?artistId=${e.artist.youTubeMusicUrl??""}&artistName=${e.artist.title??""}`),P(r,"src",e.artist.imageUrl),P(r,"alt",e.artist.title),Ue(l,e.artist.title)}),y(a,t),z()}var ft=C('<div class="artist-list"></div>');function vt(a,e){N(e,!0);const t=async()=>await ba.getArtists(e.query);var r=M(),n=A(r);Be(n,t,u=>{se(u,{count:4,_class:"artist-list"})},(u,l)=>{var f=ft();J(f,21,()=>s(l),X,(c,i)=>{ut(c,{get artist(){return s(i)}})}),T(f),y(u,f)}),y(a,r),z()}var dt=C('<div class="content"><!></div>'),_t=C('<div class="top-bar"><div class="flex"><!></div> <!></div> <!>',1);function Et(a,e){N(e,!0);const t=v=>g(c,x(v));function r(v){v?s(c)===q.Release&&t(q.Album):s(f)===void 0&&(s(c),q.Release)}function n(v){l=v,l?s(c)===q.Release&&g(c,x(q.Album)):(g(f,""),g(c,x(q.Release)))}let u=I(void 0),l="",f=I(""),c=I(x(q.Release));ee(()=>{l=l,g(c,x(s(c))),Ce.clearTokens(Se)}),Pe(()=>Ce.clearTokens(Se));var i=_t(),o=A(i),d=S(o),m=S(d);Pa(m,{search:v=>g(f,x(v)),changeInputQuery:n,changeInputFocuse:r}),T(d);var _=O(d,2);Oa(_,{changeRequestType:t,get requestType(){return s(c)}}),T(o);var h=O(o,2);pa(h,()=>()=>({query:s(f),requestType:s(c)}),v=>{var p=dt(),L=S(p);E(L,()=>s(f)!=="",k=>{var b=M(),R=A(b);E(R,()=>s(c)===q.Album,w=>{et(w,{get query(){return s(f)}})},w=>{var W=M(),ne=A(W);E(ne,()=>s(c)===q.Track,H=>{ot(H,{get query(){return s(f)},get environment(){return e.data.environmentStore}})},H=>{var ge=M(),Ge=A(ge);E(Ge,()=>s(c)===q.Artist,Ze=>{vt(Ze,{get query(){return s(f)}})},null,!0),y(H,ge)},!0),y(w,W)}),y(k,b)},k=>{var b=M(),R=A(b);E(R,()=>s(c)===q.Release,w=>{Ga(w,{})},null,!0),y(k,b)}),T(p),Q(()=>P(p,"style",`margin-top: ${s(u)??""}px`)),y(v,p)}),Ma(o,"clientHeight",v=>g(u,v)),y(a,i),z()}export{Et as component};
